{"version":3,"file":"index.umd.js","sources":["../src/index.ts"],"sourcesContent":["import { Kysely, PostgresDialect, ColumnType } from \"kysely\";\nimport pg from \"pg\";\n\n/* -----------------------------------------------------------------------------------------------------\n * Define Normal Tables\n * ----------------------------------------------------------------------------------------------------- */\ninterface IUser {\n  id: ColumnType<number, number, never>;\n  username: string;\n  name: string;\n  avatar_url: string;\n  github_url: string;\n  created_at: ColumnType<Date, Date, never>;\n  modified_at: Date;\n}\n\ninterface IRole {\n  id: ColumnType<string, string, never>;\n  description: string;\n  created_at: ColumnType<Date, Date, never>;\n  modified_at: Date;\n}\n\ninterface IBlogPost {\n  id: ColumnType<number, number | undefined, never>;\n  title: string;\n  description: string;\n  image_url: string;\n  body: string;\n  author_id: number;\n  views: number;\n  published: boolean;\n  first_published_at: ColumnType<Date | null, Date | null, Date>;\n  content_modified_at: Date;\n  created_at: ColumnType<Date, Date, never>;\n  modified_at: Date;\n}\n\ninterface ITag {\n  id: ColumnType<string, string, never>;\n  created_at: ColumnType<Date, Date, never>;\n  modified_at: Date;\n}\n\ninterface IAttachment {\n  id: ColumnType<number, number | undefined, never>;\n  size: number;\n  type: string;\n  url: string;\n  blogpost_id: ColumnType<number | null>;\n  is_unused: boolean;\n  expires_at: ColumnType<Date | null>;\n  created_at: ColumnType<Date, Date, never>;\n  modified_at: Date;\n}\n\n/* -----------------------------------------------------------------------------------------------------\n * Define Linker Tables\n * ----------------------------------------------------------------------------------------------------- */\ninterface IUserRole {\n  user_id: ColumnType<number, number, never>;\n  role_id: ColumnType<string, string, never>;\n}\n\ninterface IBlogPostTag {\n  blogpost_id: ColumnType<number, number, never>;\n  tag_id: ColumnType<string, string, never>;\n}\n\n/* -----------------------------------------------------------------------------------------------------\n * Define Database\n * ----------------------------------------------------------------------------------------------------- */\ninterface IDatabase {\n  users: IUser;\n  roles: IRole;\n  blogposts: IBlogPost;\n  tags: ITag;\n  attachments: IAttachment;\n  user_roles: IUserRole;\n  blogpost_tags: IBlogPostTag;\n}\n\nfunction getClient(connectionUrl: string) {\n  return new Kysely<IDatabase>({\n    dialect: new PostgresDialect({ pool: new pg.Pool({ connectionString: connectionUrl }) }),\n  });\n}\n\nexport { getClient };\nexport type { IUser, IRole, IBlogPost, ITag, IAttachment, IUserRole, IBlogPostTag, IDatabase };\n"],"names":["connectionUrl","Kysely","dialect","PostgresDialect","pool","pg","Pool","connectionString"],"mappings":"wYAkFA,SAAmBA,GACjB,OAAW,IAAAC,EAAMA,OAAY,CAC3BC,QAAS,IAAIC,kBAAgB,CAAEC,KAAM,IAAIC,EAAAA,QAAGC,KAAK,CAAEC,iBAAkBP,OAEzE"}